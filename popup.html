<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="appName">Volume Master</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <!-- Loading State -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p data-i18n="loading">Loading audio tabs...</p>
    </div>

    <!-- Error State -->
    <div id="error-banner" class="error-banner" style="display: none;">
        <span id="error-text">⚠️</span>
        <button class="error-close" id="error-close">&times;</button>
    </div>

    <!-- Main Content -->
    <div id="main-content" class="container" style="display: none;">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <span class="icon">🔊</span>
                <h1 data-i18n="appName">Volume Master</h1>
            </div>
            <div class="header-controls">
                <button id="refresh-btn" class="refresh-btn" data-i18n-title="refreshTabs" title="Refresh audio tabs">
                    🔄
                </button>
                <button id="theme-toggle" class="theme-toggle" data-i18n-title="toggleDarkMode" title="Toggle dark mode">
                    🌙
                </button>
            </div>
        </div>

        <!-- Volume Control Section -->
        <div class="volume-section">
            <div class="volume-header">
                <span class="volume-icon" id="volume-icon">🔊</span>
                <span class="volume-value" id="volume-value">100%</span>
            </div>

            <!-- Volume Slider -->
            <div class="volume-control">
                <input 
                    type="range" 
                    min="0" 
                    max="600" 
                    step="1"
                    value="100"
                    id="volume-slider"
                    class="volume-slider"
                >
            </div>

            <!-- Quick Volume Buttons -->
            <div class="quick-controls">
                <button data-volume="0" class="quick-btn">🔇</button>
                <button data-volume="50" class="quick-btn">50%</button>
                <button data-volume="100" class="quick-btn">100%</button>
                <button data-volume="200" class="quick-btn">200%</button>
                <button data-volume="400" class="quick-btn">400%</button>
                <button data-volume="600" class="quick-btn">600%</button>
            </div>

            <!-- Volume Adjustment Buttons -->
            <div class="volume-adjust">
                <button id="decrease-volume" class="adjust-btn">-</button>
                <button id="increase-volume" class="adjust-btn">+</button>
            </div>
        </div>

        <!-- Audio Mode Section -->
        <div class="audio-mode-section">
            <label class="section-title" data-i18n="audioEnhancement">Audio Enhancement</label>
            <div class="audio-modes">
                <button 
                    data-mode="default"
                    class="mode-btn active"
                    id="mode-default"
                >
                    <span class="mode-icon">🔊</span>
                    <span class="mode-label" data-i18n="modeDefault">Default</span>
                </button>
                <button 
                    data-mode="voice"
                    class="mode-btn"
                    id="mode-voice"
                >
                    <span class="mode-icon">🎤</span>
                    <span class="mode-label" data-i18n="modeVoice">Voice</span>
                </button>
                <button 
                    data-mode="bass"
                    class="mode-btn"
                    id="mode-bass"
                >
                    <span class="mode-icon">🎵</span>
                    <span class="mode-label" data-i18n="modeBass">Bass</span>
                </button>
            </div>
            <!-- Mode applying indicator -->
            <div id="mode-applying-indicator" class="applying-indicator">
                <div class="spinner"></div>
                <span data-i18n="applyingMode">Applying audio mode...</span>
            </div>
        </div>

        <!-- Quick Switcher Section -->
        <div class="quick-switcher-section">
            <div class="section-header">
                <label class="section-title" data-i18n="quickSwitcher">Quick Switcher</label>
            </div>
            <div class="quick-switcher-controls">
                <button id="prev-audio-tab" class="switcher-btn" data-i18n-title="switchToPrev" title="Previous Audio Tab">
                    ⏮️
                </button>
                <button id="next-audio-tab" class="switcher-btn" data-i18n-title="switchToNext" title="Next Audio Tab">
                    ⏭️
                </button>
                <button id="mute-all-tabs" class="switcher-btn" data-i18n-title="muteAll" title="Mute All">
                    🔇
                </button>
            </div>
            <div id="current-audio-tab" class="current-tab-info" style="display: none;">
                <div class="current-tab-favicon">🌐</div>
                <div class="current-tab-title">No audio tab</div>
            </div>
        </div>

        <!-- Audio Tabs Section -->
        <div class="tabs-section">
            <div class="section-header">
                <label class="section-title">
                    <span data-i18n="audioTabs">Audio Tabs</span> (<span id="tabs-count">0</span>)
                </label>
                <div class="applying-indicator" id="applying-indicator" style="display: none;">
                    <div class="spinner-small"></div>
                    <span data-i18n="applying">Applying...</span>
                </div>
            </div>

            <div id="no-tabs" class="no-tabs">
                <p data-i18n="noAudioTabs">🔇 No audio tabs detected</p>
                <p class="hint" data-i18n="noAudioTabsHint">Play audio in any tab to control its volume</p>
            </div>

            <div id="tabs-list" class="tabs-list" style="display: none;">
                <!-- Tabs will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html> 